<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>AMVP library: src/os_util.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">AMVP library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">os_util.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="amvp_8h.html">amvp.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="midbg_8h.html">midbg.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a1fbd5289e29cf1fae3294616eb7e2ff3"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structAMVP__RESULT.html">AMVP_RESULT</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__util_8h.html#a1fbd5289e29cf1fae3294616eb7e2ff3">amvpu_setup_callback</a> )(<a class="el" href="structmidbg__session.html">midbg_session</a> *)</td></tr>
<tr class="memdesc:a1fbd5289e29cf1fae3294616eb7e2ff3"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="os__util_8h.html#a1fbd5289e29cf1fae3294616eb7e2ff3" title="amvpu_setup_callback() callback from amvpu_exec_debug(). See amvpu_exec_debug() for more information...">amvpu_setup_callback()</a> callback from <a class="el" href="os__util_8h.html#aa772b5b594b99752c27096966490e508" title="amvpu_exec_debug() Run the external test program under the debugger. All the output from standard err...">amvpu_exec_debug()</a>. See <a class="el" href="os__util_8h.html#aa772b5b594b99752c27096966490e508" title="amvpu_exec_debug() Run the external test program under the debugger. All the output from standard err...">amvpu_exec_debug()</a> for more information.  <a href="#a1fbd5289e29cf1fae3294616eb7e2ff3">More...</a><br/></td></tr>
<tr class="separator:a1fbd5289e29cf1fae3294616eb7e2ff3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1787a362d1a9aced7cd119c899e36928"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__util_8h.html#a1787a362d1a9aced7cd119c899e36928">amvpu_readalloc</a> (int fd)</td></tr>
<tr class="memdesc:a1787a362d1a9aced7cd119c899e36928"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="os__util_8h.html#a1787a362d1a9aced7cd119c899e36928" title="amvpu_readalloc() read everything from a file descriptor into newly allocated memory and return it...">amvpu_readalloc()</a> read everything from a file descriptor into newly allocated memory and return it. Caller is responsible for freeing the result.  <a href="#a1787a362d1a9aced7cd119c899e36928">More...</a><br/></td></tr>
<tr class="separator:a1787a362d1a9aced7cd119c899e36928"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97034d34ec0d12a61a98f9b3eefa5450"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__util_8h.html#a97034d34ec0d12a61a98f9b3eefa5450">amvpu_rmdir_r</a> (const char *path)</td></tr>
<tr class="memdesc:a97034d34ec0d12a61a98f9b3eefa5450"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="os__util_8h.html#a97034d34ec0d12a61a98f9b3eefa5450" title="amvpu_rmdir_r() remove a directory and all it&#39;s contents ">amvpu_rmdir_r()</a> remove a directory and all it's contents  <a href="#a97034d34ec0d12a61a98f9b3eefa5450">More...</a><br/></td></tr>
<tr class="separator:a97034d34ec0d12a61a98f9b3eefa5450"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07e5c295b833d2472d6ed0e634d340f3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structAMVP__RESULT.html">AMVP_RESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__util_8h.html#a07e5c295b833d2472d6ed0e634d340f3">amvpu_copyfile</a> (char *src, char *dest)</td></tr>
<tr class="memdesc:a07e5c295b833d2472d6ed0e634d340f3"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="os__util_8h.html#a07e5c295b833d2472d6ed0e634d340f3" title="amvpu_copyfile() copy a file from source to dest. both source and dest should be paths to regular fil...">amvpu_copyfile()</a> copy a file from source to dest. both source and dest should be paths to regular files. Dest will be truncated if it exists and created if it doesn't  <a href="#a07e5c295b833d2472d6ed0e634d340f3">More...</a><br/></td></tr>
<tr class="separator:a07e5c295b833d2472d6ed0e634d340f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9222d63cee1cd13847e8653aa25033df"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__util_8h.html#a9222d63cee1cd13847e8653aa25033df">amvpu_exec_log</a> (const char *client, const char *prog, char *const argv[], <a class="el" href="structAMVP__RESULT.html">AMVP_RESULT</a> *status)</td></tr>
<tr class="memdesc:a9222d63cee1cd13847e8653aa25033df"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="os__util_8h.html#a9222d63cee1cd13847e8653aa25033df" title="amvpu_exec_log() run the external text program. All the output from standard error and standard out a...">amvpu_exec_log()</a> run the external text program. All the output from standard error and standard out are saved in a log which is returned. The caller is responsible for freeing that collected log.  <a href="#a9222d63cee1cd13847e8653aa25033df">More...</a><br/></td></tr>
<tr class="separator:a9222d63cee1cd13847e8653aa25033df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa772b5b594b99752c27096966490e508"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__util_8h.html#aa772b5b594b99752c27096966490e508">amvpu_exec_debug</a> (const char *client, const char *prog, char *const argv[], <a class="el" href="structAMVP__RESULT.html">AMVP_RESULT</a> *status, <a class="el" href="os__util_8h.html#a1fbd5289e29cf1fae3294616eb7e2ff3">amvpu_setup_callback</a> callback, unsigned long filter)</td></tr>
<tr class="memdesc:aa772b5b594b99752c27096966490e508"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="os__util_8h.html#aa772b5b594b99752c27096966490e508" title="amvpu_exec_debug() Run the external test program under the debugger. All the output from standard err...">amvpu_exec_debug()</a> Run the external test program under the debugger. All the output from standard error and standard out are saved in a log which is returned. The caller is responsible for freeing that collected log. The debugger session is controlled with the mi command interface for gdb using the midbg library included in libamvp.a. Before the program gets launched, 'callback' is called with a pointer to the <a class="el" href="structmidbg__session.html" title="handle to the current debugging session. ">midbg_session</a> so that break points and enviroment stuff can be set up. debugging control happens through callbacks from the various breakpoint functions.  <a href="#aa772b5b594b99752c27096966490e508">More...</a><br/></td></tr>
<tr class="separator:aa772b5b594b99752c27096966490e508"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is the public header file to be included by applications using the libamvp utilities to executing test programs both under the debugger and outside of it. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a1fbd5289e29cf1fae3294616eb7e2ff3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structAMVP__RESULT.html">AMVP_RESULT</a>(* amvpu_setup_callback)(<a class="el" href="structmidbg__session.html">midbg_session</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="os__util_8h.html#a1fbd5289e29cf1fae3294616eb7e2ff3" title="amvpu_setup_callback() callback from amvpu_exec_debug(). See amvpu_exec_debug() for more information...">amvpu_setup_callback()</a> callback from <a class="el" href="os__util_8h.html#aa772b5b594b99752c27096966490e508" title="amvpu_exec_debug() Run the external test program under the debugger. All the output from standard err...">amvpu_exec_debug()</a>. See <a class="el" href="os__util_8h.html#aa772b5b594b99752c27096966490e508" title="amvpu_exec_debug() Run the external test program under the debugger. All the output from standard err...">amvpu_exec_debug()</a> for more information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"><a class="el" href="structmidbg__session.html" title="handle to the current debugging session. ">midbg_session</a></td><td>Pointer to the debug context </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structAMVP__RESULT.html" title="This enum is used to indicate error conditions to the appplication layer. Most libamvp function will ...">AMVP_RESULT</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a07e5c295b833d2472d6ed0e634d340f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structAMVP__RESULT.html">AMVP_RESULT</a> amvpu_copyfile </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="os__util_8h.html#a07e5c295b833d2472d6ed0e634d340f3" title="amvpu_copyfile() copy a file from source to dest. both source and dest should be paths to regular fil...">amvpu_copyfile()</a> copy a file from source to dest. both source and dest should be paths to regular files. Dest will be truncated if it exists and created if it doesn't </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>- path to the source file </td></tr>
    <tr><td class="paramname">dest</td><td>- path to the destination file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structAMVP__RESULT.html" title="This enum is used to indicate error conditions to the appplication layer. Most libamvp function will ...">AMVP_RESULT</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aa772b5b594b99752c27096966490e508"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* amvpu_exec_debug </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>prog</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *const&#160;</td>
          <td class="paramname"><em>argv</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structAMVP__RESULT.html">AMVP_RESULT</a> *&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="os__util_8h.html#a1fbd5289e29cf1fae3294616eb7e2ff3">amvpu_setup_callback</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>filter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="os__util_8h.html#aa772b5b594b99752c27096966490e508" title="amvpu_exec_debug() Run the external test program under the debugger. All the output from standard err...">amvpu_exec_debug()</a> Run the external test program under the debugger. All the output from standard error and standard out are saved in a log which is returned. The caller is responsible for freeing that collected log. The debugger session is controlled with the mi command interface for gdb using the midbg library included in libamvp.a. Before the program gets launched, 'callback' is called with a pointer to the <a class="el" href="structmidbg__session.html" title="handle to the current debugging session. ">midbg_session</a> so that break points and enviroment stuff can be set up. debugging control happens through callbacks from the various breakpoint functions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>- name of the client under test, used to create unique temp files </td></tr>
    <tr><td class="paramname">prog</td><td>- path to program </td></tr>
    <tr><td class="paramname">argv</td><td>- null terminated array of arguments for the program </td></tr>
    <tr><td class="paramname">status</td><td>- pointer to an <a class="el" href="structAMVP__RESULT.html" title="This enum is used to indicate error conditions to the appplication layer. Most libamvp function will ...">AMVP_RESULT</a> to return the result of the test </td></tr>
    <tr><td class="paramname">callback</td><td>- call back called before program exec to setup the debugger </td></tr>
    <tr><td class="paramname">filter</td><td>- controls what kinds of records are returned in the log. filter == 0 returns everything. See <a class="el" href="midbg_8h.html#af9f008c82167246e8eae35b379c8ad61" title="midbg_open_session() Create a new debugging session. Session is freed by midbg_close_session(). This function is used by amvpu_exec_debug(). Test appplications need not call it. ">midbg_open_session()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char * (returned log) </dd></dl>

</div>
</div>
<a class="anchor" id="a9222d63cee1cd13847e8653aa25033df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* amvpu_exec_log </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>prog</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *const&#160;</td>
          <td class="paramname"><em>argv</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structAMVP__RESULT.html">AMVP_RESULT</a> *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="os__util_8h.html#a9222d63cee1cd13847e8653aa25033df" title="amvpu_exec_log() run the external text program. All the output from standard error and standard out a...">amvpu_exec_log()</a> run the external text program. All the output from standard error and standard out are saved in a log which is returned. The caller is responsible for freeing that collected log. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>- name of the client under test, used to create unique temp files </td></tr>
    <tr><td class="paramname">prog</td><td>- path to program </td></tr>
    <tr><td class="paramname">argv</td><td>- null terminated array of arguments for the program </td></tr>
    <tr><td class="paramname">status</td><td>- pointer to an <a class="el" href="structAMVP__RESULT.html" title="This enum is used to indicate error conditions to the appplication layer. Most libamvp function will ...">AMVP_RESULT</a> to return the result of the test </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char * (returned log) </dd></dl>

</div>
</div>
<a class="anchor" id="a1787a362d1a9aced7cd119c899e36928"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* amvpu_readalloc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="os__util_8h.html#a1787a362d1a9aced7cd119c899e36928" title="amvpu_readalloc() read everything from a file descriptor into newly allocated memory and return it...">amvpu_readalloc()</a> read everything from a file descriptor into newly allocated memory and return it. Caller is responsible for freeing the result. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>open file descriptor </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char * </dd></dl>

</div>
</div>
<a class="anchor" id="a97034d34ec0d12a61a98f9b3eefa5450"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int amvpu_rmdir_r </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="os__util_8h.html#a97034d34ec0d12a61a98f9b3eefa5450" title="amvpu_rmdir_r() remove a directory and all it&#39;s contents ">amvpu_rmdir_r()</a> remove a directory and all it's contents </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>- path to the directory to remove </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
